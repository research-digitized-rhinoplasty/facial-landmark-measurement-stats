<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Facial Measurement Stats</title>
  <link href="https://unpkg.com/tabulator-tables@5.5.2/dist/css/tabulator.min.css" rel="stylesheet">
</head>
<body>
  <h2>Facial Landmark Measurement Stats</h2>
  <div id="stats-table"></div>

  <script src="https://unpkg.com/tabulator-tables@5.5.2/dist/js/tabulator.min.js"></script>
  <script>
    // Load JSON data (update the path to your real JSON file if needed)
    fetch('data.json')
      .then(response => response.json())
      .then(data => {
        // Assume top-level array of participants
        const flattened = [];

        data.forEach(participant => {
          participant.ParticipantMeasurements?.forEach(measurement => {
            flattened.push({
              participantFileId: participant.participantFileId,
              Gender: participant.Gender,
              Age: participant.Age,
              Ethnicity: participant.Ethnicity,
              FacialSurgery: participant.FacialSurgery,
              MeasurementName: measurement.MeasurementName,
              Value: measurement.Value
            });
          });
        });

        new Tabulator("#stats-table", {
          data: data, // your flattened JSON array
          layout: "fitDataStretch",
          pagination: "local",
          paginationSize: 10,

          columns: [
            { title: "Participant ID", field: "participantFileId", headerFilter: "input" },
            { title: "Gender", field: "Gender", headerFilter: "select", headerFilterParams: { values: true } },
            { title: "Age", field: "Age", headerFilter: "number" },
            { title: "Ethnicity", field: "Ethnicity", headerFilter: "select", headerFilterParams: { values: true } },
            { title: "Facial Surgery", field: "FacialSurgery", headerFilter: "select", headerFilterParams: { values: true } },
            { title: "Landmark Name", field: "LandmarkName", headerFilter: "input" },
            { title: "Value", field: "Value", headerFilter: "number" }
          ]
        });

      });








  </script>
</body>
</html>
