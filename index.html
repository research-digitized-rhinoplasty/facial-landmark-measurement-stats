<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Facial Measurement Stats</title>
  <link href="https://unpkg.com/tabulator-tables@5.5.2/dist/css/tabulator.min.css" rel="stylesheet">
</head>
<body>
  <h2>Facial Landmark Measurement Stats</h2>
  <div id="stats-table"></div>

  <script src="https://unpkg.com/tabulator-tables@5.5.2/dist/js/tabulator.min.js"></script>
  <script>
    // Load JSON data (update the path to your real JSON file if needed)
    fetch('data.json')
      .then(response => response.json())
      .then(data => {
        // Assume top-level array of participants
        const flattened = [];

        data.forEach(participant => {
          participant.ParticipantMeasurements?.forEach(measurement => {
            flattened.push({
              participantFileId: participant.participantFileId,
              Gender: participant.Gender,
              Age: participant.Age,
              Ethnicity: participant.Ethnicity,
              FacialSurgery: participant.FacialSurgery,
              MeasurementName: measurement.MeasurementName,
              Value: measurement.Value
            });
          });
        });

        new Tabulator("#stats-table", {
          data: flattened,
          layout: "fitDataStretch",
          pagination: "local",
          paginationSize: 10,
          columns: [
            { title: "Participant ID", field: "participantFileId" },
            { title: "Gender", field: "Gender" },
            { title: "Age", field: "Age" },
            { title: "Ethnicity", field: "Ethnicity" },
            { title: "Surgery", field: "FacialSurgery" },
            { title: "Measurement", field: "MeasurementName" },
            { title: "Value", field: "Value" }
          ]
        });
      });








  </script>
</body>
</html>
